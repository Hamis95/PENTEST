# H6

**a)**

Aikaisemmat tehtävät: [H1](https://github.com/Hamis95/PENTEST/wiki/H1) [H2](https://github.com/Hamis95/PENTEST/blob/main/H2.md) [H3](https://github.com/Hamis95/PENTEST/blob/main/H3.md) [H4](https://github.com/Hamis95/PENTEST/blob/main/H4.md) [H5](https://github.com/Hamis95/PENTEST/blob/main/H5.MD)


**c)**

Tässä tehtävässä käytettävä hashcat on asennettu Window10 käyttöjärjestelmää, jotta pystyn hyödyntämään **GTX 970** näytönohjaintani.

**md5-tiiviste**

Luon md5 hashin nettisivulla https://www.md5hashgenerator.com/ 
salasanana käytän ```drowssap``` ja siitä hashiksi muodostuu ```b497dd1a701a33026f7211533620780d```

Tämä on ensimmäinen testi ja haluan nähdä nopeasti toimiiko hashcat kunnolla niin laitan parametrin ```?l?l?l?l?l?l?l?l```. Tämä tarkoittaa, että salasanassa on vain pieniä kirjaimi ja niitä on 8 kappaletta.

Syötän siis hashcattiin komennon ```>hashcat.exe -m 0 -a 3 b497dd1a701a33026f7211533620780d ?l?l?l?l?l?l?l?l```
Parametri **-m** määrää tiivisteen ja hashcatissa md5=0. **-a** parametri taas määrää hyökkäystavan, joka tässä tapauksessa on brute force.
[Lähde](https://hashcat.net/wiki/doku.php?id=example_hashes)

![md5](https://github.com/Hamis95/PENTEST/blob/main/hashcat1.png?raw=true)

Hashcat mursi salauksen erittäin nopeasti

**SHA256-tiiviste**

Luon tiivisteen sivun https://passwordsgenerator.net/ avulla. Salasanaksi laitan ```salasana1``` ja tiivisteeksi tuli ```85907CFE26A71266FBC723873A553586DDEC9CFA9EEDB0672401D88E7AF37D73```

nyt yritän murtaa salasanan ilman merkeille annettuja parametreja.
Tässä meni kuitenkin ikä ja terveys, niin päätin lisätä sanalistan mahdollisista salasanoista, johon viimeiseksi lisäsin oikean vaihtoehdon.
Itse listan kopioin osoitteesta https://github.com/danielmiessler/SecLists/blob/master/Passwords/Common-Credentials/10-million-password-list-top-500.txt , johon lisäsin loppuun ```salasana1```

Joten uusi käsky käy ```>hashcat.exe -m 1400 -a 3 85907CFE26A71266FBC723873A553586DDEC9CFA9EEDB0672401D88E7AF37D73 passwords.txt```

![SHA256](https://github.com/Hamis95/PENTEST/blob/main/hashcat2.png?raw=true)

Hashcat sai tiivisteen murrettua noin minuutissa.

**SHA512-tiiviste**

Nyt kokeilen samaa hieman monimutkaisemmalla tiivisteellä. Äskinen tiiviste oli 256 bittinne ja tämä on 512 bittinen. Katsotaan onko niiden purkamisessa kestävässä ajassa eroa.
Käytin tämän hashin luontiin sivua https://passwordsgenerator.net/sha512-hash-generator/ ja samalla salasanalla hashista tuli:
```95B0C6C3CA15D25037F6311FD61E309FE34D1A64DB172FC07F1D8D59D34C20E66BC8517CEC5C95A8984E9A65AEABC8705AA92CEEC13E33378DC0133D0117BB2C```

Juoksen hashcattia siis komennolla ```>hashcat.exe -m 1400 -a 3 95B0C6C3CA15D25037F6311FD61E309FE34D1A64DB172FC07F1D8D59D34C20E66BC8517CEC5C95A8984E9A65AEABC8705AA92CEEC13E33378DC0133D0117BB2C passwords.txt```

![SHA512](https://github.com/Hamis95/PENTEST/blob/main/hashcat3.png?raw=true)

Salasanan hashaamisessa ei mennyt merkittävästi enemmän aikaa

**SHA1-tiiviste**

Tällä kertaa luon tiivisteen linuxin konsolilla käskyllä ```$ echo -n "salasana1" | sha1sum```
jolloin hashiksi tulee ```15d175444d004450dfd181b890c89b0a4ef0198a```

Pistän tämän juoksemaan hashcattiin käskyllä ```>hashcat.exe -m 100 -a 3 34c60b46e86df0b25057750788ba45b998dbf1f5 passwords.txt```

![SHA1](https://github.com/Hamis95/PENTEST/blob/main/hashcat4.png?raw=true)

Toimi taas.

**whirlpool-tiiviste**

Tämän tein linux konsolilla käskyllä ```$ echo -n "salasana1" | whirlpooldeep```
ja tiivisteeksi syntyi ```17da7e6c733d38688d6946408753e96f2f611f116630055a078c23c874380a3d4573b235f451ae2cfed0d2838fb83c4328519a90206fce31e56f4cf7a2bcff92```

Hashcattiin komennolla ```>hashcat.exe -m 6100 -a 3 17da7e6c733d38688d6946408753e96f2f611f116630055a078c23c874380a3d4573b235f451ae2cfed0d2838fb83c4328519a90206fce31e56f4cf7a2bcff92 passwords.txt```

![whirlpool](https://github.com/Hamis95/PENTEST/blob/main/hashcat5.png?raw=true)



**d)**

Tässä tehtävässä käytän hydraa omaa **metasploitable 2** konetta vastaan.

Teen ensin kaksi eri teksi tiedostoa **usernames.txt** ja **passwords.txt** näihin laitan pienen määrän yleisiä käyttäjätunnuksia ja salasanoja.

Tiedän että metasploitable 2 nettisivulla on login sivu ```http://192.168.56.102/mutillidae/index.php?page=login.php```

Juoksen käskyn ```$ sudo hydra -L usernames.txt -P passwords.txt 192.168.56.102 http-head /mutillidae/index.php?page=login.php```

Hydra alkaa kokeilemaan eri salasana ja käyttäjänimi yhdistelmiä.

![hydra1](https://github.com/Hamis95/PENTEST/blob/main/hydra1.png?raw=true)

Koska sivu ei ilmoita että salasana on väärin niin hydra pitää jokaista käyttäjätunnusta validina.


**e)**

asensin juice shopin kaliin dockerin avulla ja nyt palvelu pyörii localhostissa portissa 3000.
[käyttämäni ohjeet](https://www.digitalocean.com/community/tutorials/how-to-install-and-use-docker-on-debian-10) ja [tämä](https://hub.docker.com/r/bkimminich/juice-shop#docker-container)


Osoitteesta löytyy login sivu osoitteesta ```http://localhost:3000/#/login``` , joten laitan sinne hydran pyörimään.

käytän käskyä ```$ sudo hydra -s 3000 -L usernames.txt -P passwords.txt localhost http-head /#/login```

![hydra2](https://github.com/Hamis95/PENTEST/blob/main/hydra2.png?raw=true)

Tässäkin hydra toteaa kaikki kokeillut salasanat valideiksi.

**f)**

Tehtävässä tuli tehdä oma nettisivu, joten laitoin apachen pyörimään kaliin ja kopioin sinne huvikseen tekemäni sivun html lähdekoodin.
Sivulla on valmiiksi jonkin verran jaarittelua.

![omasivu](https://github.com/Hamis95/PENTEST/blob/main/omasivu.png?raw=true)

CEWL työkalulla saan sivulta printattua teksin käskyllä ```$ cewl localhost``` ja teen siitä sanalistan **omasanalista.txt**

Tässä tulos:

```
and
you
Hämis
the
The
website
for
have
money
Number
apustaja
prez
For
President
Campaign
Ideology
Execution
official
presidental
candidate
called
rent
too
damn
high
gas
prices
are
fucked
wife
sleeping
with
your
neighbour
solution
all
problems
then
some
How
ask
Blockchain
BITCONNECT
Bitconnect
this
totally
legit
blockchain
that
not
scam
any
way
only
thing
start
making
head
over
fist
deposit
fill
required
information
below
straight
personal
bank
account
let
rest
You
just
sit
back
relax
enjoy
flow
Bank
Account
Password
Social
Security
```

**g)**

aloitan tehtävän lataamalla pdf tiedoston kanssa, mutta tämä tuntui olevan liian haastavaa, joten yritin zip2john ohjelmaa kalilla. Tästä ohjelmasta on kuitenkin erittäin huonot ohjeet netissä, enkä onnistunut zipin murtamisessa. Tehtävien parissa tuli tänään rikottua kali ja juice shopin asennuskaan ei meinannut sujua, mutta tämä tehtävä oli se mihin tyssäsi. Toivot, että tunnilla käydään hieman läpi zip2johnin käyttöä.

**h)**

Elmon tehtävästä 4 löytyi uusi hyvä työkalu LinEnum, jolla voi enumeroida linux koneita.
https://github.com/rootElmo/Tunkeutumistestaus-harjoitukset/blob/main/Harjoitus4/Text.md

Tommin sivulta löyti tehtävästä 4 työkalu exitfool jolla voi kaivaa metadataa nettisivulta helposti.
https://tommimuhonen334781833.wordpress.com/penetraatio-testaus-harjoitus-4/

