#H4

**z)**

Ensimmäiseksi katsoin Ippsec videon "buff" koneen murtamisesta
* Koneella pyöri portissa 8080 http sivu
* Sivulla pyöri fitness sivusto, johon käytettiin ohjelmaa **gobuster**
* Sivulla käytettiin vanhaa softaa "gym management system", jolle löytyi exploitti ohjelmalla **searchsploit**
* koneen hallinnassa käytettiin msfvenom

Seuraavaksi katsoin Ippsec videon "remote" koneen murtamisesta
* koneella oli auki FTP, SMB ja NSF portit
* walkthroughssa käytettiin työkaluja **crackmapexec ja winpeas**
* koneella pyörivälle nettisivulle pääsi sisään hyödyntämällä umbracon haavoittuvuutta, jolla salasanojen hashit saatiin näkyviin.
* salasana oli sha1 enkoodattu
* hashauksen purkuun käytettiin **john the ripperiä**

Seuraavaksi luin walkthroughn "tabby" koneen murtamisesta
* portit: TCP ports, SSH (22), HTTP Apache (80), and HTTP Tomcat (8080) olivat auki
* nettisivun hostaaja on "mega hosting" ja sivulla pyörii php
* reverse shell hankittiin msfvenom ohjelmalla
* shellissä selailemalla näkee että käyttäjä ash omistaa tiedoston backup.zip
* hascatin avulla salasana saatiin hashattyä tiedostosta ja näin kirjauduttiin ash käyttäjälle
* ashin oikeuksiin kuuluvaan konttiin laitettiin pyörimään lxc exploitti, jolla rootin directory saatiin luettavaksi

Seuraavaksi luin walkthroughn "blunder" koneen murtamisesta
* koneella auki portit SSH (22) ja HTTP (9001)
* http sivulla pyörii blogisivusto
* gobuster löysi /admin/ directoryn, jossa on buildit sisäänkirjautumisportaali sivuston muokkaukseen
* searchsploitista löytyy haavoittuvuus buildittiin
* php exploit löytää hugo käyttäjän ja sha1 hashatun salasanan
* blunderin vanha versio antaa keinon kirjautua roottiin käyttäjä id "-1"


**a)**

Luin enemmänkin walkthrough artikkeleja ja niistä paljastui kiinnostavia työkaluja
Otin tähän tehtävään kohteeksi HTB koneen ```10.10.10.195```, koska koneella pyörii http palvelin ja nettisivu.

Ensimmäiseksi työkalu nimeltään **gobuster**, joka tutkii nettisivun mahdolliset directoryt bruteforce menetelmällä. 

Käskyllä ```$ gobuster dir -u http://10.10.10.195/ -w common.txt```

![nampb](https://github.com/Hamis95/PENTEST/blob/main/gobuster.png?raw=true)

gobuster löysi siis directoryn **/admin/**
gobuster toimii hyvin samalla tavalla kun dirbuster, mutta gobuster on himan kevyempi käyttää. Sopii hyvin virtuaalikoneelle. Latasin myös sanalistan githubista wgetillä. Olisin voinut myös käyttää dirbusterin valmista word listaa, mutta halusin kokeilla toisella.

Toinen työkaluni on nimeltään **Nikto**. Tämä työkalu löytyy valmiiksi asennettuna kali linuxilta
Nikto skannaa web-serveriltä haavoittuvuuksi etsimällä vanhoja ohjelmaversioita/protocollia ja kertoo mahdolliset **OSVDB** haavoittuvuudet ja niiden numerot.

Käskyllä ```$ nikto -h 10.10.10.195``` nikto listaa osoitteella pyörivän http-palvelimen mahdolliset haavoittuvuudet

![nampb](https://github.com/Hamis95/PENTEST/blob/main/nikto.png?raw=true)

ainoa haavoittuvuus, jonka nikto löysi kohteesta oli **OSVDB-3126: /submit?setoption=q&option=allowed_ips&value=255.255.255.255: MLdonkey 2.x allows administrative interface access to be access from any IP. This is typically only found on port 4080**

Kolmas työkaluni on nimeltään **owasp-zap**. Se tutkii nettisivun mahdolisia haavoittuvuuksi graafisella käyttöliittymällä.
Testasin sivun "http://10.10.10.195" haavoittuvuudet tällä työkalulla. Ohjelma lähettää kohdesivulle erilaisia GET ja POST pyyntöjä ja tulostaa niiden vastaukset.

![nampb](https://github.com/Hamis95/PENTEST/blob/main/owasp-zap.png?raw=true)

Neljäntenä ohjelmana käytän **john the ripperiä**, joka purkaa salasanojen hashauksia. Tein siis pienen testin, mutta en purkanut salasanoja loppuun. Tässä olisi mennyt liian kauan aikaa ja tietokoneen tuulettimet alkoivat kuulostaa boeing 747 lentokoneelta.
Kopioin siis oman järjestelmäni salasanatiedoston **hash.txt** tiedostoon ja pistin johnin pyövelöimään käskyllä ```$ john hash.text```

![nampb](https://github.com/Hamis95/PENTEST/blob/main/johntheripper.png?raw=true)


Tulosta ei siis tullut, mutta ohjelma toimi.


Viides työkaluni on **wfuzz** sen idea on bruteforcaa webbi aplikaatioita syöttämällä random dataa.
Pistin wfuzzin hyökkäämään osoitteeseen ```10.10.10.195```

![nampb](https://github.com/Hamis95/PENTEST/blob/main/wfuzz.png?raw=true)


**b)**

Tutkin tehtävässä koneet Ropetwo, openkeys, unbalanced, laser ja worker.

Käytän kaikissa kohteissa käskyä ```$ sudo nmap -sC -sV -oA recon -p- -T4 -v 10.10.10.xxx```, jotta saan mahdollisimman paljon tietoa nmapin avulla.

**RopeTwo**

Aloitan tiedustelun käskyllä ```$ sudo nmap -sC -sV -oA recon -p- -T4 -v 10.10.10.196```

![nampb](https://github.com/Hamis95/PENTEST/blob/main/ropetwo.png?raw=true)

Mitä tulostuksesta saa selville:
* Koneen käyttöjäjestelmä on Linux Ubuntu
* Koneella ovat auki portit 22(SSH), 5000(http-nginx), 8000(http-werkzeug), 8060(nginx) ja 9094(nginx)
* Portin 22 ssh palvelu on OpenSSH 7.9p1
* Portteja 5000, 8060 ja 9094 kuuntelevan nginx palvelun versio on 1.14.2
* Portin 8000 werkzeug ohjelmassa pyörii Python/3.7.3. Werkzeug on webbiaplikaation kirjasto
* Portti 9094 on auki, mutta sitä kuuntelevaa palvelua ei pystytty tunnistamaan

Searchsploitilla nginx:stä löytyi muutama haavoittuvuus, sillä versio 1.14.2 on erittäin vanha.
Haavoittuvuuksissa oli Chuncked Encoding Stack Buffer Overflow (Metasploit) ja Denial of Service (PoC), joten kone on haavoittuvainen metasploitille ja PoC dosille.
OpenSSH oli sen verran ajantasalla että searchsploitista ei ainakaan löytynyt siihe haavoittuvuutta.

**OpenKeyS**

Aloitan tiedustelun käskyllä ```$ sudo nmap -sC -sV -oA recon -p- -T4 -v 10.10.10.199```

![nampb](https://github.com/Hamis95/PENTEST/blob/main/OpenKeyS.png?raw=true)







buff
gobuster
searchsploit

remote
crackmapexec
smbclient
cherrytree
showmount
winpeas
